<canvas id="ctx" width="1000" height="800" style="border:1px solid #000000;"></canvas>

<img id="playerOneWalkLeftImg" src="Art/walkLeft.gif" width ="0" height="0">
<img id="backgroundImg" src="Art/backgroundweb.png" width="0" height="0">
<img id="playerOneImg" src="Art/stand.gif" width="0" height="0">
<img id="playerOneWalkRightImg" src="Art/walkRight.gif" width="0" height="0">
<img id="playerOneStandImg" src="Art/standLeft.gif" width="0" height="0">
<img id="playerOneHitRight" src="Art/hitslow.gif" width="0" height="0">
<img id="playerOneHitLeft" src="Art/hitslowleft.gif" width="0" height="0">
<img id="playerOneJumpRight" src="Art/jumpRight.gif" width="0" height="0">
<img id="playerOneJumpLeft" src="Art/jumpLeft.gif" width="0" height="0">
<img id="playerOneSquatRight" src="Art/squatRight.png" width="0" height="0">
<img id="playerOneSquatLeft" src="Art/squatLeft.png" width="0" height="0">
<img id="badGuy" src="Art/badGuy.png" width="0" height="0">
<img id="kickLeft" src="Art/kicklEft.gif" width="0" height="0">
<img id="kickRight" src="Art/kickRight.gif" width="0" height="0">

<script>

var ctx = document.getElementById("ctx").getContext("2d");
//All Image variables
var background = document.getElementById("backgroundImg");
var playerOneImage = document.getElementById("playerOneImg");
var playerOneWalkRightImg = document.getElementById("playerOneWalkRightImg");
var playerOneWalkLeftImg = document.getElementById("playerOneWalkLeftImg");
var playerOneStandImg = document.getElementById("playerOneStandImg");
var playerOneHitRight = document.getElementById("playerOneHitRight");
var playerOneHitLeft = document.getElementById("playerOneHitLeft");
var playerOneJumpRight = document.getElementById("playerOneJumpRight");
var playerOneJumpLeft = document.getElementById("playerOneJumpLeft");
var playerOneSquatRight = document.getElementById("playerOneSquatRight");
var playerOneSquatLeft = document.getElementById("playerOneSquatLeft");
var badGuy = document.getElementById("badGuy");
var kickLeft = document.getElementById("kickLeft");
var kickRight = document.getElementById("kickRight");
//Control variables
var keys = [];
var time = 99;
var hitTime = 0;
// action variables
var isJump = false;
var isDuck = false;
var canMove = true;
var isPunch = false;
var isKick = false;
var goLeft = false;
var goRight = false;
var faceRight = true;
var faceLeft = false;
// physics variables
var speed = 5;
var jumpStrength = 20;
var jumpDecay = 0.5;
// playerOne's start position, width, and height
var playerOne = { x: 10, y: 640, width: 50, height: 150, health: 100 };
var playerTwo = { x: 990, y: 640, width: 50, height: 150, health: 100 };
playerTwoSpeed = 10;
// bringing actions when keys are pressed
window.addEventListener("keydown", function(e){ keys[e.keyCode] = true }, false);
window.addEventListener("keyup", function(e){ delete keys[e.keyCode]; }, false);

function game()
{

	update();
	render();

}
// function for constant statements that need to be checked
function update()
{
	// Jump Action key = "W"
	if(keys[87]) 
	{ 
		if(!isJump && !isDuck) 
		{
			isJump = true;
			playerOne.y = 639;
		} 
	}
	// Duck Action key = "S"
	if(keys[83] && !isJump) 
	{ 
		isDuck = true;
		speed = 0;
	}
	if(!keys[83] && !isPunch && !isKick || isJump)
	{
		isDuck = false;
		speed = 5;
	}
	// Move Right key = "D"
	if(keys[68])
	{	
		faceLeft = false;
		faceRight = true;
		goRight = true;
		if(playerTwo.x == playerOne.x + playerOne.width + playerOne.width && playerOne.y > playerTwo.y - playerTwo.height)
		{
			speed = 0;
		}
		else
		{
			playerOne.x+= speed;
		}
	}
	if(!keys[68] && goRight)
	{
		goRight = false;
	}
	// Move Left key = "A"
	if(keys[65])
	{
		faceRight = false;
		faceLeft = true;
		goLeft = true;
		if(playerOne.x == playerTwo.x && playerOne.y > playerTwo.y - playerTwo.height)
		{
			speed = 0;
		}
		else
		{
			playerOne.x-= speed;
		}
	}
	if(!keys[65] && goLeft)
	{
		goLeft = false;
	}
	// Punch Action key = "J"
	if(keys[74] && !isPunch && !isKick)
	{
		isPunch = true;
		speed = 0;
	}
	if(!keys[74])
	{
		isPunch = false;
	}
	// Kick Action key = "K"
	if(keys[75] && !isKick && !isPunch)
	{
		speed = 0;
		isKick = true;
	}
	if(!keys[75])
	{
		isKick = false;
	}
	// Resets the players position to being on the floor (mostly for after jumps)
	if(playerOne.y > 640)
	{
		jumpDecay = .5;
		playerOne.y = 640;
		isJump = false;
	}
	//Gravity equation...
	else if(playerOne.y != 640)
	{
		// constantly updates playerOne's Y position
		playerOne.y -= jumpStrength - jumpDecay;
		// constantly increases the amount of pull downwards by one. 
		jumpDecay += 1;
	}
	// Keeps player in bounds of the screen
	if(playerOne.x < 0)
	{
		playerOne.x = 0;
	}
	if(playerOne.x > 1000 - playerOne.width)
	{
		playerOne.x = 1000 - playerOne.width;
	}
	//Keeps player in bounds of the screen
	if(playerTwo.x > 1000)
	{
		playerTwo.x = 1000;
		goLeft = true;
		goRight = false;
	}
	if(playerTwo.x < 0 + playerTwo.width)
	{
		playerTwo.x = 0 + playerTwo.width;
		goLeft = false;
		goRight = true;
	}
	if(playerOne.x == playerTwo.x && playerOne.y > playerTwo.y - playerTwo.height || playerTwo.x == playerOne.x + playerOne.width + playerOne.width && playerOne.y > playerTwo.y - playerTwo.height)
	{
		speed = 0;
		playerTwoSpeed = 0;
	}
	else
	{
		playerTwoSpeed = 10;
	}
}


// renders players
function render()
{
	ctx.drawImage(background,0,0);
	ctx.fillStyle = 'black';
	ctx.font = "bold 90px chiller"
	ctx.fillText(time, 500, 90);
	ctx.fillStyle = 'green';
	// standing hitBox
	if(!isDuck)
	{
		ctx.fillRect(playerOne.x, playerOne.y, playerOne.width, playerOne.height);
	}
	if(isDuck)
	{
		ctx.fillRect(playerOne.x, playerOne.y + playerOne.height/2, playerOne.width, playerOne.height/2);
		if(faceRight)
		{
			ctx.drawImage(playerOneSquatRight, playerOne.x, playerOne.y);
		}
		if(faceLeft)
		{		
			ctx.drawImage(playerOneSquatLeft, playerOne.x, playerOne.y);
		}	
	}
	if(!isDuck && !goLeft && !goRight && faceRight && !isKick && !isPunch && !isJump) 
	{
		ctx.drawImage(playerOneImage, playerOne.x - 25, playerOne.y - 10);
	}
	if(!isDuck && !goLeft && !goRight && faceLeft && !isKick && !isPunch && !isJump)
	{
		ctx.drawImage(playerOneStandImg, playerOne.x - 25, playerOne.y - 10);
	}	
	// ducking hitBox
	if(goRight && !goLeft && !isPunch && !isKick && !isJump && !isDuck)
	{
		ctx.drawImage(playerOneWalkRightImg, playerOne.x - 45, playerOne.y - 10);
	}
	if(goLeft && !goRight && !isPunch && !isKick && !isJump && !isDuck)
	{
		ctx.drawImage(playerOneWalkLeftImg, playerOne.x - 60, playerOne.y - 10);
	}
	if(isPunch && !isJump && !isDuck) 
	{
		if(faceRight)
		{
			ctx.drawImage(playerOneHitRight, playerOne.x - 65, playerOne.y - 65);
		}
		if(faceLeft && !isJump && !isDuck)
		{
			ctx.drawImage(playerOneHitLeft, playerOne.x - 65, playerOne.y - 65);
		}
	}
	if(isKick)
	{
		//ctx.fillRect(playerOne.x + playerOne.width, playerOne.y + playerOne.height - 25, 50, 25);
	}
	if(faceRight && isJump)
	{
		ctx.drawImage(playerOneJumpRight, playerOne.x - 40, playerOne.y - 65);
	}
	if(faceLeft && isJump)
	{
		ctx.drawImage(playerOneJumpLeft, playerOne.x - 60, playerOne.y - 65);
	}
	if(isKick)
	{
		if(faceRight)
		{
			ctx.drawImage(kickRight, playerOne.x - 10, playerOne.y - 10);
		}
		if(faceLeft)
		{
			ctx.drawImage(kickLeft, playerOne.x - 60, playerOne.y - 10);
		}
	}
	ctx.fillStyle = 'red';
	ctx.fillRect(playerTwo.x - playerTwo.width, playerTwo.y, playerTwo.width, playerTwo.height);
	ctx.drawImage(badGuy, playerTwo.x - 50, playerTwo.y);
}

function timer()
{
	if(time != 0)
	{
		ctx.fillStyle = 'red';
		ctx.font = "bold 90px chiller";
		ctx.fillText(time, 500, 90);
		time--;
	}
}

// frames per second
setInterval(game, 1000/50);
setInterval(timer, 1000);

</script>
